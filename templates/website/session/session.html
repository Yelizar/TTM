{% extends "website/base.html" %}
{% load static %}
{% load notifications_tags %}
{% block titel %} Session {% endblock %}
{% block content %}
    {% if form %}
        <form class="access-form" method="POST" action="{% url 'session:session' %}">
            {% csrf_token %}
            New session<br>
            {{ form }}
            <button class="primaryAction" type="submit">Initialize</button>
        </form>
    {% elif session %}
        {% live_notify_badge %}
        {% live_notify_list %}
        {{ session.student.website.get_full_name }}, {{ session.language }}
        <form class="access-form" method="POST" action="{% url 'session:session' %}">
            {% csrf_token %}
            <input type="hidden" name="cancel"/>
            <button class="primaryAction" type="submit">Cancel Session</button>
        </form>

    {% endif %}
    <div class="section">
        <p class="column2">
            <a href="{% url 'session:history' %}">History</a>
        </p>
    </div>
    <script src="{% static 'notifications/notify.js' %}" type="text/javascript"></script>
    {% register_notify_callbacks callbacks='fill_notification_list,fill_notification_badge' %}
{% endblock %}
